<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" TreatAsLocalProperty="TaskFolder;TaskAssembly;TaskConfiguration">

  <PropertyGroup>
    <DefaultSpecFlowFeatureExtension Condition=" '$(DefaultSpecFlowFeatureExtension)' == '' ">.feature</DefaultSpecFlowFeatureExtension>
    
    <TaskFolder Condition=" '$(MSBuildRuntimeType)' == 'Core' ">netstandard2.0</TaskFolder>
    <TaskFolder Condition=" '$(MSBuildRuntimeType)' != 'Core' ">net461</TaskFolder>
    <TaskConfiguration Condition=" '$(Configuration)' != '' ">$(Configuration)</TaskConfiguration>
    <TaskConfiguration Condition=" '$(TaskConfiguration)' == '' ">Debug</TaskConfiguration>
    <TaskAssembly>$(MSBuildThisFileDirectory)..\tasks\$(TaskFolder)\TechTalk.SpecFlow.Tools.MsBuild.Generation.dll</TaskAssembly>
    <TaskAssembly Condition=" !Exists('$(TaskAssembly)') ">$(MSBuildThisFileDirectory)..\bin\$(TaskConfiguration)\$(TaskFolder)\TechTalk.SpecFlow.Tools.MsBuild.Generation.dll</TaskAssembly>

    <EnableDefaultSpecFlowItems Condition=" '$(EnableDefaultSpecFlowItems)' == '' ">true</EnableDefaultSpecFlowItems>
    <!--<DefaultItemExcludes>$(DefaultItemExcludes);**/*.feature.cs</DefaultItemExcludes>-->
  </PropertyGroup>

  <ItemGroup>
    <!--<Compile Include="**/*.feature.cs" Exclude="$(DefaultItemExcludes);$(DefaultExcludesInProjectFolder)" Condition=" '$(EnableDefaultCompileItems)' == 'true' ">
      <Visible>false</Visible>
    </Compile>-->
    <SpecFlowFeatureFile Include="**/*.feature" Exclude="$(DefaultItemExcludes);$(DefaultExcludesInProjectFolder)" Condition=" '$(EnableDefaultSpecFlowItems)' == 'true' " />
  </ItemGroup>

  <UsingTask TaskName="TechTalk.SpecFlow.Tools.MsBuild.Generation.GenerateAll" AssemblyFile="$(TaskAssembly)" />

</Project>
